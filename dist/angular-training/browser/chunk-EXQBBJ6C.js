import{a as F}from"./chunk-4ZPKLBLM.js";import{f as U}from"./chunk-522L63WJ.js";import{Ia as g,Ka as l,La as f,Na as e,O as C,Oa as t,Pa as x,Qa as P,Ra as S,Sa as u,Wa as i,Xa as c,Ya as v,_ as y,bb as D,db as E,ga as _,ha as O,i as b,q as h,wb as k,xb as w,ya as r,yb as I,za as M}from"./chunk-4AAHRBRP.js";var T=o=>["/users",o];function A(o,a){o&1&&(e(0,"div",4),x(1,"div",5),e(2,"p"),i(3,"Loading dashboard data..."),t()())}function $(o,a){if(o&1&&(e(0,"div",31)(1,"div",32),i(2),t(),e(3,"div",33),i(4),t()()),o&2){let n=a.$implicit,s=a.index,m=u(2);f("height",n.count/m.getMaxCityCount()*100,"%")("background",m.getBarColor(s)),r(2),c(n.city),r(2),c(n.count)}}function L(o,a){if(o&1&&(e(0,"div",34)(1,"div",35),i(2),t(),e(3,"div",36)(4,"div",37),i(5),t(),e(6,"div",38),i(7),t()(),e(8,"div",39),x(9,"div",40),t()()),o&2){let n=a.$implicit,s=a.index,m=u(2);r(2),c(s+1),r(3),c(n.company),r(2),v("",n.count," users"),r(2),f("width",n.count/m.getMaxCompanyCount()*100,"%")}}function N(o,a){if(o&1&&(e(0,"div",41)(1,"div",42),i(2),t(),e(3,"div",43)(4,"div",44),i(5),t(),e(6,"div",45),i(7),t()(),e(8,"a",46),i(9,"View"),t()()),o&2){let n=a.$implicit,s=u(2);r(2),v(" ",s.getInitials(n.name)," "),r(3),c(n.name),r(2),c(n.email),r(),l("routerLink",E(4,T,n.id))}}function V(o,a){if(o&1&&(e(0,"div",47)(1,"div",48),i(2),t(),e(3,"div",49)(4,"div",50),i(5),t(),e(6,"div",51),i(7),t()()()),o&2){let n=a.$implicit;r(2),c(n.icon),r(3),c(n.description),r(2),c(n.time)}}function q(o,a){if(o&1){let n=P();e(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9),i(4,"\u{1F465}"),t(),e(5,"div",10)(6,"div",11),i(7),t(),e(8,"div",12),i(9,"Total Users"),t()()(),e(10,"div",8)(11,"div",9),i(12,"\u{1F3E2}"),t(),e(13,"div",10)(14,"div",11),i(15),t(),e(16,"div",12),i(17,"Companies"),t()()(),e(18,"div",8)(19,"div",9),i(20,"\u{1F4CD}"),t(),e(21,"div",10)(22,"div",11),i(23),t(),e(24,"div",12),i(25,"Cities"),t()()(),e(26,"div",8)(27,"div",9),i(28,"\u{1F4CA}"),t(),e(29,"div",10)(30,"div",11),i(31),t(),e(32,"div",12),i(33,"Avg Users/Company"),t()()()(),e(34,"div",13)(35,"div",14)(36,"h3"),i(37,"Top Cities"),t(),e(38,"div",15)(39,"div",16),g(40,$,5,6,"div",17),t()()(),e(41,"div",14)(42,"h3"),i(43,"Top Companies"),t(),e(44,"div",18),g(45,L,10,5,"div",19),t()(),e(46,"div",14)(47,"h3"),i(48,"Recent Users"),t(),e(49,"div",20),g(50,N,10,6,"div",21),t()(),e(51,"div",14)(52,"h3"),i(53,"System Activity"),t(),e(54,"div",22),g(55,V,8,3,"div",23),t()()(),e(56,"div",24)(57,"h3"),i(58,"Quick Actions"),t(),e(59,"div",25)(60,"a",26)(61,"div",27),i(62,"\u{1F465}"),t(),e(63,"div",28),i(64,"View All Users"),t()(),e(65,"button",29),S("click",function(){_(n);let m=u();return O(m.refreshData())}),e(66,"div",27),i(67,"\u{1F504}"),t(),e(68,"div",28),i(69,"Refresh Data"),t()(),e(70,"a",30)(71,"div",27),i(72,"\u2699\uFE0F"),t(),e(73,"div",28),i(74,"Settings"),t()()()()()}if(o&2){let n=u();r(7),c(n.stats.totalUsers),r(8),c(n.stats.totalCompanies),r(8),c(n.stats.topCities.length),r(8),c(n.getAverageUsersPerCompany()),r(9),l("ngForOf",n.stats.topCities),r(5),l("ngForOf",n.stats.topCompanies),r(5),l("ngForOf",n.stats.recentUsers),r(5),l("ngForOf",n.getSystemActivity())}}var z=class o{constructor(a){this.userService=a}stats=null;loading=!1;destroy$=new b;ngOnInit(){this.loadDashboardData()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadDashboardData(){this.loading=!0,this.userService.getUsers().pipe(h(a=>this.calculateStats(a)),C(this.destroy$)).subscribe({next:a=>{this.stats=a,this.loading=!1},error:a=>{console.error("Error loading dashboard data:",a),this.loading=!1}})}calculateStats(a){let n={},s={};a.forEach(d=>{n[d.address.city]=(n[d.address.city]||0)+1,s[d.company]=(s[d.company]||0)+1});let m=Object.entries(n).map(([d,p])=>({city:d,count:p})).sort((d,p)=>p.count-d.count).slice(0,5),j=Object.entries(s).map(([d,p])=>({company:d,count:p})).sort((d,p)=>p.count-d.count).slice(0,5);return{totalUsers:a.length,totalCompanies:Object.keys(s).length,topCities:m,topCompanies:j,recentUsers:a.slice(0,5)}}getInitials(a){return a.split(" ").map(n=>n[0]).join("").toUpperCase()}getMaxCityCount(){return Math.max(...this.stats?.topCities.map(a=>a.count)||[1])}getMaxCompanyCount(){return Math.max(...this.stats?.topCompanies.map(a=>a.count)||[1])}getAverageUsersPerCompany(){return!this.stats||this.stats.totalCompanies===0?0:Math.round(this.stats.totalUsers/this.stats.totalCompanies)}getBarColor(a){let n=["#667eea","#764ba2","#f093fb","#f5576c","#4facfe"];return n[a%n.length]}getSystemActivity(){return[{icon:"\u{1F504}",description:"System backup completed successfully",time:"2 hours ago"},{icon:"\u{1F464}",description:"New user registration",time:"4 hours ago"},{icon:"\u{1F4CA}",description:"Monthly report generated",time:"1 day ago"},{icon:"\u2699\uFE0F",description:"System maintenance scheduled",time:"2 days ago"}]}refreshData(){this.loadDashboardData()}static \u0275fac=function(n){return new(n||o)(M(F))};static \u0275cmp=y({type:o,selectors:[["app-dashboard"]],standalone:!0,features:[D],decls:8,vars:2,consts:[[1,"dashboard-container"],[1,"dashboard-header"],["class","loading",4,"ngIf"],["class","dashboard-content",4,"ngIf"],[1,"loading"],[1,"spinner"],[1,"dashboard-content"],[1,"metrics-grid"],[1,"metric-card"],[1,"metric-icon"],[1,"metric-info"],[1,"metric-value"],[1,"metric-label"],[1,"analytics-grid"],[1,"analytics-card"],[1,"chart-container"],[1,"bar-chart"],["class","bar-item",3,"height","background",4,"ngFor","ngForOf"],[1,"company-list"],["class","company-item",4,"ngFor","ngForOf"],[1,"recent-users"],["class","user-item",4,"ngFor","ngForOf"],[1,"activity-feed"],["class","activity-item",4,"ngFor","ngForOf"],[1,"quick-actions"],[1,"action-buttons"],["routerLink","/users",1,"action-btn"],[1,"action-icon"],[1,"action-text"],[1,"action-btn",3,"click"],["routerLink","/settings",1,"action-btn"],[1,"bar-item"],[1,"bar-label"],[1,"bar-value"],[1,"company-item"],[1,"company-rank"],[1,"company-info"],[1,"company-name"],[1,"company-count"],[1,"company-bar"],[1,"company-bar-fill"],[1,"user-item"],[1,"user-avatar"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"user-link",3,"routerLink"],[1,"activity-item"],[1,"activity-icon"],[1,"activity-content"],[1,"activity-description"],[1,"activity-time"]],template:function(n,s){n&1&&(e(0,"div",0)(1,"header",1)(2,"h1"),i(3,"Dashboard"),t(),e(4,"p"),i(5,"Overview of your user management system"),t()(),g(6,A,4,0,"div",2)(7,q,75,8,"div",3),t()),n&2&&(r(6),l("ngIf",s.loading),r(),l("ngIf",!s.loading&&s.stats))},dependencies:[I,k,w,U],styles:[".dashboard-container[_ngcontent-%COMP%]{max-width:1400px;margin:0 auto;padding:2rem}.dashboard-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#333;font-size:2.5rem;margin-bottom:.5rem}.dashboard-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1.1rem}.loading[_ngcontent-%COMP%]{text-align:center;padding:3rem}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.metrics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;margin-bottom:3rem}.metric-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0000001a;display:flex;align-items:center;gap:1.5rem;transition:transform .3s ease}.metric-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.metric-icon[_ngcontent-%COMP%]{font-size:3rem;padding:1rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;filter:grayscale(.2)}.metric-value[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:#333;margin-bottom:.5rem}.metric-label[_ngcontent-%COMP%]{color:#666;font-size:.9rem;text-transform:uppercase;letter-spacing:.5px}.analytics-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(350px,1fr));gap:2rem;margin-bottom:3rem}.analytics-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0000001a}.analytics-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0 0 1.5rem;font-size:1.5rem}.chart-container[_ngcontent-%COMP%]{height:200px;display:flex;align-items:end;justify-content:center}.bar-chart[_ngcontent-%COMP%]{display:flex;align-items:end;gap:1rem;height:100%;width:100%}.bar-item[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;min-height:20px;border-radius:4px 4px 0 0;position:relative;transition:opacity .3s ease}.bar-item[_ngcontent-%COMP%]:hover{opacity:.8}.bar-label[_ngcontent-%COMP%]{position:absolute;bottom:-2rem;font-size:.8rem;color:#666;text-align:center;width:100%}.bar-value[_ngcontent-%COMP%]{position:absolute;top:-1.5rem;font-size:.8rem;color:#333;font-weight:600}.company-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.company-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.company-rank[_ngcontent-%COMP%]{background:#667eea;color:#fff;width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.9rem}.company-info[_ngcontent-%COMP%]{flex:1}.company-name[_ngcontent-%COMP%]{font-weight:600;color:#333}.company-count[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.company-bar[_ngcontent-%COMP%]{width:100px;height:6px;background:#e2e8f0;border-radius:3px;overflow:hidden}.company-bar-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#667eea,#764ba2);transition:width .3s ease}.recent-users[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.user-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.5rem;border-radius:8px;transition:background .3s ease}.user-item[_ngcontent-%COMP%]:hover{background:#f8f9fa}.user-avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:.9rem}.user-info[_ngcontent-%COMP%]{flex:1}.user-name[_ngcontent-%COMP%]{font-weight:500;color:#333}.user-email[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.user-link[_ngcontent-%COMP%]{background:#667eea;color:#fff;padding:.5rem 1rem;border-radius:6px;text-decoration:none;font-size:.9rem;transition:background .3s ease}.user-link[_ngcontent-%COMP%]:hover{background:#5a6fd8}.activity-feed[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.activity-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:1rem;padding:1rem;background:#f8f9fa;border-radius:8px}.activity-icon[_ngcontent-%COMP%]{font-size:1.5rem;flex-shrink:0}.activity-description[_ngcontent-%COMP%]{font-weight:500;color:#333;margin-bottom:.5rem}.activity-time[_ngcontent-%COMP%]{font-size:.9rem;color:#666}.quick-actions[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:12px;box-shadow:0 4px 20px #0000001a}.quick-actions[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#333;margin:0 0 1.5rem;font-size:1.5rem}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap}.action-btn[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:.5rem;padding:1.5rem;background:#f8f9fa;border:none;border-radius:8px;cursor:pointer;text-decoration:none;color:#333;transition:all .3s ease;min-width:120px}.action-btn[_ngcontent-%COMP%]:hover{background:#e2e8f0;transform:translateY(-2px)}.action-icon[_ngcontent-%COMP%]{font-size:1.5rem}.action-text[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500}@media (max-width: 768px){.dashboard-container[_ngcontent-%COMP%]{padding:1rem}.metrics-grid[_ngcontent-%COMP%], .analytics-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.action-buttons[_ngcontent-%COMP%]{justify-content:center}}"]})};export{z as DashboardComponent};
